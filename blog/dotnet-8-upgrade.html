<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Carbon Aware SDK 1.4, behind the scenes | Carbon Aware SDK</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://carbon-aware-sdk.greensoftware.foundation/img/CASDK-logo.png"><meta data-rh="true" name="twitter:image" content="https://carbon-aware-sdk.greensoftware.foundation/img/CASDK-logo.png"><meta data-rh="true" property="og:url" content="https://carbon-aware-sdk.greensoftware.foundation/blog/dotnet-8-upgrade"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Carbon Aware SDK 1.4, behind the scenes | Carbon Aware SDK"><meta data-rh="true" name="description" content="As most software nowadays, the Carbon Aware SDK relies on a stack of utilities, and while adding a new feature is usually the most appealing for a project, it’s also critical to maintain the stack, especially in a community effort."><meta data-rh="true" property="og:description" content="As most software nowadays, the Carbon Aware SDK relies on a stack of utilities, and while adding a new feature is usually the most appealing for a project, it’s also critical to maintain the stack, especially in a community effort."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-05-16T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="dotnet8,post"><link data-rh="true" rel="icon" href="/img/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://carbon-aware-sdk.greensoftware.foundation/blog/dotnet-8-upgrade"><link data-rh="true" rel="alternate" href="https://carbon-aware-sdk.greensoftware.foundation/blog/dotnet-8-upgrade" hreflang="en"><link data-rh="true" rel="alternate" href="https://carbon-aware-sdk.greensoftware.foundation/blog/dotnet-8-upgrade" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://carbon-aware-sdk.greensoftware.foundation/blog/dotnet-8-upgrade","mainEntityOfPage":"https://carbon-aware-sdk.greensoftware.foundation/blog/dotnet-8-upgrade","url":"https://carbon-aware-sdk.greensoftware.foundation/blog/dotnet-8-upgrade","headline":"Carbon Aware SDK 1.4, behind the scenes","name":"Carbon Aware SDK 1.4, behind the scenes","description":"As most software nowadays, the Carbon Aware SDK relies on a stack of utilities, and while adding a new feature is usually the most appealing for a project, it’s also critical to maintain the stack, especially in a community effort.","datePublished":"2024-05-16T00:00:00.000Z","author":[],"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://carbon-aware-sdk.greensoftware.foundation/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Carbon Aware SDK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Carbon Aware SDK Atom Feed"><link rel="stylesheet" href="/assets/css/styles.b85a5f36.css">
<script src="/assets/js/runtime~main.e0b2a577.js" defer="defer"></script>
<script src="/assets/js/main.7e70d323.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#EBF2D7;color:#00524f" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><strong>⚠ Graduated Project: This project is a Graduated Project, supported by the Green Software Foundation. The publicly available version documented in the README is trusted by the GSF. New versions of the project may be released, or it may move to the Maintained or Archived Stage.</strong> </div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/CASDK-logo.png" alt="Carbon Aware SDK Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/CASDK-logo.png" alt="Carbon Aware SDK Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Carbon Aware SDK</b></a><a class="navbar__item navbar__link" href="/docs/overview">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a href="https://greensoftware.foundation/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GSF</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Green-Software-Foundation/carbon-aware-sdk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v1.7">Release v1.7</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v1.6.1">Release v1.6.1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v1.6">Release v1.6</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v1.5">Release v1.5</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v1.4">Release v1.4</a></li></ul></div></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">Carbon Aware SDK 1.4, behind the scenes</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-05-16T00:00:00.000Z">May 16, 2024</time> · <!-- -->9 min read</div></header><div id="__blog-post-container" class="markdown"><p>As most software nowadays, the Carbon Aware SDK relies on a stack of utilities, and while adding a new feature is usually the most appealing for a project, it’s also critical to maintain the stack, especially in a community effort.</p>
<p>Containerization has helped shift the upgrading work to a more convenient time for the development team, but there are still various motivations for keeping a stack up to date with current versions: security, bug fixes, performance, support… but the best is to couple with new feature development: such was the case for the .NET framework.</p>
<p>However, those updates often have ripple effects, as their dependencies are not always foreseeable, making the software upgrade workload hard to predict.</p>
<p>As NTT and NTT DATA were key participants in this contribution, this is a good occasion to cast a light on the behind the scenes, and the way this new Carbon Aware SDK is being used internally.</p>
<p>Carbon Aware SDK v1.4.0 was released in May 2024. Its core evolution was the upgrade to .NET 8. Until v1.3.x, the Carbon Aware SDK relied on the LTS (Long Term Support) version .NET 6. With an EOL (End of Life) set for November 2024, an upgrade was unavoidable.</p>
<p>Microsoft released .NET 8 in November 2023, the latest LTS version of .NET, which <a href="https://dotnet.microsoft.com/en-us/platform/support/policy/dotnet-core" target="_blank" rel="noopener noreferrer">will be supported until November 2026</a>.</p>
<p>Wanting to display the Software Carbon Intensity (<a href="https://sci.greensoftware.foundation/" target="_blank" rel="noopener noreferrer">SCI - Software Carbon Intensity</a> as adopted in <a href="https://www.iso.org/standard/86612.html" target="_blank" rel="noopener noreferrer">ISO/IEC 21031:2024</a>) metrics from the Carbon Aware SDK WebAPI made .NET 8 a requirement, as .NET 8 introduced <a href="https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-8/runtime#extensions-metrics" target="_blank" rel="noopener noreferrer">enhanced support for implementing metrics features</a>.</p>
<p>Indeed, the newly introduced <a href="https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.imeterfactory?view=net-8.0" target="_blank" rel="noopener noreferrer">IMeterFactory</a> interface enabled us to create a <a href="https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.meter?view=net-8.0" target="_blank" rel="noopener noreferrer">Meter</a> instance while maintaining modularity by using dependency injection (i.e. use the .NET 8 implementation of the feature, instead of recreating it… another software development sustainable pattern).</p>
<p>In summary, Carbon Intensity metrics handling was combined with the necessary support extension that the .NET 8 upgrade provides.</p>
<h1>In practice</h1>
<p>The initial work for upgrading to .NET 8 was done in <a href="https://github.com/Green-Software-Foundation/carbon-aware-sdk/pull/404" target="_blank" rel="noopener noreferrer">Pull Request #404</a> (aka PR, a code change proposal, which once approved will be merged in the main code).</p>
<p>Without being a C# expert, it’s still interesting to look at the PR and see that: it involves several individuals working together as a community, many files were impacted, and highlights the importance of tests and samples, which required further work due to some ripple effects.</p>
<p>For the nitty gritty (else jump to the next paragraph): the core work is “simply” updating the target framework version.</p>
<p>It can be done in the property window of each of the C# projects, for example, in the Japanese version of Visual Studio (Fig.1).</p>
<p><img decoding="async" loading="lazy" alt="fig1" src="/assets/images/fig1-798bfd7a1f30b0b88d900e60fbc48bd3.png" width="1118" height="430" class="img_ev3q"></p>
<p>Fig.1 Property window of C# project in Carbon Aware SDK on Visual Studio Community Edition</p>
<p>Carbon Aware SDK includes 30 C# projects (in v1.3.0 at least), so automation is welcomed. The target framework version is described in <code>/Project/PropertyGroup/TargetFramework</code> in the <code>.csproj</code> file. For example, running the command on WSL:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">find . -name &quot;*.csproj&quot; -exec sed -i &#x27;s|^\(\s\+\)&lt;TargetFramework&gt;net6.0&lt;/TargetFramework&gt;$|\1&lt;TargetFramework&gt;net8.0&lt;/TargetFramework&gt;|g&#x27; {} \;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The .NET version is specified in many other places, which need to be updated as well (<code>grep</code> will list them all).</p>
<ul>
<li>Base image in Docker file<!-- -->
<ul>
<li>Use tag <code>8.0</code> instead of <code>6.0</code> for <code>mcr.microsoft.com/dotnet/sdk</code></li>
</ul>
</li>
<li>Tool configurations<!-- -->
<ul>
<li>global.json</li>
<li>dotnet-tools.json</li>
<li>launch.json for VSCode</li>
</ul>
</li>
<li>Target framework version for OpenAPI generator for .NET</li>
<li>.NET version for <a href="https://github.com/actions/setup-dotnet" target="_blank" rel="noopener noreferrer">actions/setup-dotnet</a> in GitHub Actions Workflow</li>
<li>Comments in source files</li>
<li>Documents</li>
</ul>
<p>While the updating part is done, the work does not end there…</p>
<h1>Unexpected work items</h1>
<p>While the .NET 8 upgrade was done, some unexpected issues surfaced.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ripple-effect-on-sample-code">Ripple effect on sample code<a href="#ripple-effect-on-sample-code" class="hash-link" aria-label="Direct link to Ripple effect on sample code" title="Direct link to Ripple effect on sample code">​</a></h2>
<p>To help onboard newcomers to the Carbon Aware SDK, a sample running on Azure Functions is provided.</p>
<p>Azure Functions for .NET is transitioning one of its execution modes (the In-process model) to the Isolated worker model (<a href="https://learn.microsoft.com/en-us/azure/azure-functions/dotnet-isolated-in-process-differences" target="_blank" rel="noopener noreferrer">more details here</a>). Moreover, .NET 8 did not yet provide an option to use the former model in its initial release (cf. <a href="https://techcommunity.microsoft.com/t5/apps-on-azure-blog/net-on-azure-functions-august-2023-roadmap-update/ba-p/3910098" target="_blank" rel="noopener noreferrer">roadmap of Azure Functions</a>).</p>
<p>As our sample was still implementing the in-process model (to be deprecated and not available in .NET 8 at this time), it made sense to migrate to the isolated worker model.</p>
<p>For the code lover, there is a helpful <a href="https://learn.microsoft.com/en-us/azure/azure-functions/migrate-dotnet-to-isolated-model?tabs=net8" target="_blank" rel="noopener noreferrer">guide</a> for the migration. This led to:</p>
<ul>
<li>Change the version of container images to build and test</li>
<li>Update the <code>.csproj</code> file</li>
<li>Replace <code>Startup.cs</code> with <code>Program.cs</code></li>
<li>Replace <code>FunctionName</code> attribute with <code>Function</code></li>
<li>Change loggers to be obtained from the DI container</li>
<li>Update the document</li>
</ul>
<p>For more details browse: <a href="https://github.com/Green-Software-Foundation/carbon-aware-sdk/pull/420" target="_blank" rel="noopener noreferrer">Pull Request #420</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="port-number-breaking-change">Port Number Breaking change<a href="#port-number-breaking-change" class="hash-link" aria-label="Direct link to Port Number Breaking change" title="Direct link to Port Number Breaking change">​</a></h2>
<p>As the Carbon Aware SDK WebAPI uses ASP.NET Core technology, another collateral change was required since .NET 8 changed its default port number from 80 to 8080 <a href="https://learn.microsoft.com/en-us/dotnet/core/compatibility/containers/8.0/aspnet-port" target="_blank" rel="noopener noreferrer">Microsoft Learn document</a>).</p>
<p>Changing the port number from WebAPI container affects the containerPort in the Helm chart and some GitHub Workflows that uses WebAPI.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="broken-build-pipeline-on-github-actions">Broken build pipeline on GitHub Actions<a href="#broken-build-pipeline-on-github-actions" class="hash-link" aria-label="Direct link to Broken build pipeline on GitHub Actions" title="Direct link to Broken build pipeline on GitHub Actions">​</a></h2>
<p>Thanks to GitHub, a lot of automation is available to publish code, allowing contributors to focus more on coding. In particular, the Carbon Aware SDK repository is configured to publish the WebAPI container image (like a snapshot build) when a commit occurs on the dev branch.</p>
<p>However, it suddenly stopped working after the .NET 8 upgrade.</p>
<p>The team investigated the logs (Fig. 2), as a container image for both AMD64 and Arm64 Linux in GitHub Actions with <a href="https://github.com/docker/build-push-action" target="_blank" rel="noopener noreferrer">docker/build-push-action</a>: a mysterious segmentation fault (SEGV) was occurring after the upgrade… the code was not changed,  <code>dotnet publish</code> was outside the scope.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> &gt; [linux/arm64 build-env 4/6] RUN dotnet publish CarbonAware.WebApi/src/CarbonAware.WebApi.csproj -c Release -o publish:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7.209 MSBuild version 17.9.6+a4ecab324 for .NET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">24.69   Determining projects to restore...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">41.42 Segmentation fault (core dumped)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Fig.2 Logs in <code>dotnet publish</code> on GitHub Actions</p>
<p>Further investigation was done, and thanks to a <a href="https://devblogs.microsoft.com/dotnet/improving-multiplatform-container-support/" target="_blank" rel="noopener noreferrer">.NET blog</a> about multi-platform container support, we identified that an unsupported approach was used for the build, and needed to be amended. More precisely, since .NET 6, QEMU static binaries were used to build container images for multi-platform.</p>
<p>Fortunately, the .NET blog guides how to build multi-platform container images, and the workflow was fixed accordingly in <a href="https://github.com/Green-Software-Foundation/carbon-aware-sdk/pull/498" target="_blank" rel="noopener noreferrer">Pull Request #498</a>. So the WebAPI container image with .NET 8 can be pulled from <a href="https://github.com/Green-Software-Foundation/carbon-aware-sdk/pkgs/container/carbon-aware-sdk" target="_blank" rel="noopener noreferrer">GitHub Packages</a> now!</p>
<h1>Use case in NTT / NTT DATA</h1>
<p>While NTT &amp; NTT DATA have been contributing to the Carbon Aware SDK for a long time, we had not previously publicly referenced our <a href="https://github.com/Green-Software-Foundation/carbon-aware-sdk/blob/dev/casdk-docs/docs/overview/adopters.md" target="_blank" rel="noopener noreferrer">adoption of the tool</a>.</p>
<p>The Carbon Aware SDK v1.4.0 carbon metrics exporter (dependent on .NET8 upgrade) has increased the usefulness of the SDK due to increased visualization capabilities now available.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="carbon-intensity-map">Carbon Intensity map<a href="#carbon-intensity-map" class="hash-link" aria-label="Direct link to Carbon Intensity map" title="Direct link to Carbon Intensity map">​</a></h2>
<p>This feature facilitates integration with monitoring solutions like <a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a> and furthermore with a visualization solution like <a href="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/" target="_blank" rel="noopener noreferrer">Grafana</a>: unlocking geomap style visualization (showing metrics at specified locations on a map). By enabling the exporter and making some settings on Grafana, carbon intensities can be exported from Carbon Aware SDK to a geomap, this is part of a dashboard to monitor carbon emissions for software systems.</p>
<p>The Carbon Intensity can be intuitively visualized with size and colors on a geomap. Beyond raising awareness, this can guide decisions on location or time shift.</p>
<p><img decoding="async" loading="lazy" alt="fig3" src="/assets/images/fig3-49e2337ba84c6840781d36bde8e958f0.png" width="2860" height="1434" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="green-dashboard-for-kubernetes">Green Dashboard for Kubernetes<a href="#green-dashboard-for-kubernetes" class="hash-link" aria-label="Direct link to Green Dashboard for Kubernetes" title="Direct link to Green Dashboard for Kubernetes">​</a></h2>
<p>Carbon Aware SDK helps increase awareness around Carbon emission, and it is now possible to monitor carbon emission per application within Kubernetes.</p>
<p>In practice, each container&#x27;s energy consumption is evaluated through <a href="https://www.cncf.io/projects/kepler/" target="_blank" rel="noopener noreferrer">Kepler</a> (sandbox project in Cloud Native Cloud Foundation, <a href="https://www.cncf.io/" target="_blank" rel="noopener noreferrer">CNCF</a>), and thanks to the Carbon Aware SDK, the carbon emission can be evaluated.</p>
<p>All those emission data from power grid can be accessed through the Prometheus exporter with the Carbon Aware SDK (starting v1.4.0), and visualized with the Grafana dashboard.</p>
<p>The power consumption, energy consumption, carbon emission, and SCI can be seen at a glance!</p>
<p>One of the upsides of micro-services architecture, as Kubernetes facilitates it, is to be able to work on different pieces of an application in a relatively independent fashion (maintaining, scaling, optimizing…).</p>
<p>The Green Dashboard allows a team to check an application&#x27;s global energy consumption and carbon emission (dashboard left side), while drilling down into sustainability-related metrics for each micro-service (dashboard right side).</p>
<p>It shows the SCI, allowing to get a sense of the rate of Carbon Emission down to a particular piece of an architecture (R being the <a href="https://learn.greensoftware.foundation/measurement/#software-carbon-intensity-specification" target="_blank" rel="noopener noreferrer">functional unit</a> for that service - for example, an API call, the data is being shown per R unit or over an hour).</p>
<p>While in monolithic application optimization needs customized instrumentation, and often have rippled effects, this green dashboard helps identify which micro-service refactoring would have the maximum impact on the application&#x27;s carbon footprint, leveraging the team effort more efficiently.</p>
<p><img decoding="async" loading="lazy" alt="fig4" src="/assets/images/fig4-fc3b6185d725da8a78be25d93439263e.png" width="1901" height="925" class="img_ev3q"></p>
<h1>Moving Forward</h1>
<p>With the Cloud Computing expansion, and Kubernetes flexibility, more and more choices exist for running a workload. While business and economic constraints often lead those decisions, the carbon footprint is becoming an increasingly critical consideration.</p>
<p>This is a difficult endeavor, and the first step is to know where one stands, measure but also later evaluate and confirm what action would lead to improvement. That was one of the intentions behind the Green Dashboard for Kubernetes, and the Carbon Aware SDK 1.4 is a key element in this approach.</p>
<p>By providing a standard interface to the carbon emissions of the energy, the Carbon Aware SDK is a key element for IT sustainability: from evaluating current carbon footprint up to taking into account carbon intensity for geo or time shifting…</p>
<p>Thanks to the community effort the first step is a click away with the <a href="https://carbon-aware-sdk.greensoftware.foundation/docs/quickstart" target="_blank" rel="noopener noreferrer">quickstarting guide</a>, available for everyone.</p>
<p>No excuse!</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/dotnet-8">dotnet8</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/post">post</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/Green-Software-Foundation/carbon-aware-sdk/blog/2024-05-16-dotnet8/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/release-v1.4"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Release v1.4</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/release-v1.3"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Release v1.3</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ripple-effect-on-sample-code" class="table-of-contents__link toc-highlight">Ripple effect on sample code</a></li><li><a href="#port-number-breaking-change" class="table-of-contents__link toc-highlight">Port Number Breaking change</a></li><li><a href="#broken-build-pipeline-on-github-actions" class="table-of-contents__link toc-highlight">Broken build pipeline on GitHub Actions</a></li><li><a href="#carbon-intensity-map" class="table-of-contents__link toc-highlight">Carbon Intensity map</a></li><li><a href="#green-dashboard-for-kubernetes" class="table-of-contents__link toc-highlight">Green Dashboard for Kubernetes</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/quickstart">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/green-software-foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/gsfcommunity" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://greensoftwarefdn.slack.com/archives/C02JRAV4QEP" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack (private members only)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://greensoftware.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">greensoftware.foundation</a></li><li class="footer__item"><a href="https://github.com/Green-Software-Foundation/carbon-aware-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 GSF, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>