<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorial-extras/carbon-aware-library" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Carbon Aware Library | Carbon Aware SDK</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://carbon-aware-sdk.greensoftware.foundation/img/CASDK-logo.png"><meta data-rh="true" name="twitter:image" content="https://carbon-aware-sdk.greensoftware.foundation/img/CASDK-logo.png"><meta data-rh="true" property="og:url" content="https://carbon-aware-sdk.greensoftware.foundation/docs/tutorial-extras/carbon-aware-library"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Carbon Aware Library | Carbon Aware SDK"><meta data-rh="true" name="description" content="The Carbon Aware SDK provides a C\# Client Library to get the carbon"><meta data-rh="true" property="og:description" content="The Carbon Aware SDK provides a C\# Client Library to get the carbon"><link data-rh="true" rel="icon" href="/img/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://carbon-aware-sdk.greensoftware.foundation/docs/tutorial-extras/carbon-aware-library"><link data-rh="true" rel="alternate" href="https://carbon-aware-sdk.greensoftware.foundation/docs/tutorial-extras/carbon-aware-library" hreflang="en"><link data-rh="true" rel="alternate" href="https://carbon-aware-sdk.greensoftware.foundation/docs/tutorial-extras/carbon-aware-library" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Carbon Aware SDK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Carbon Aware SDK Atom Feed"><link rel="stylesheet" href="/assets/css/styles.b85a5f36.css">
<script src="/assets/js/runtime~main.bf9808c0.js" defer="defer"></script>
<script src="/assets/js/main.72b7f21c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#EBF2D7;color:#00524f" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><strong>âš  Graduated Project: This project is a Graduated Project, supported by the Green Software Foundation. The publicly available version documented in the README is trusted by the GSF. New versions of the project may be released, or it may move to the Maintained or Archived Stage.</strong> </div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/CASDK-logo.png" alt="Carbon Aware SDK Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/CASDK-logo.png" alt="Carbon Aware SDK Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Carbon Aware SDK</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://greensoftware.foundation/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GSF</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Green-Software-Foundation/carbon-aware-sdk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/overview">Overview</a><button aria-label="Expand sidebar category &#x27;Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quickstart">Setting up and using the Carbon Aware SDK</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/tutorial---basics">Tutorial - Basics</a><button aria-label="Expand sidebar category &#x27;Tutorial - Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/tutorial---extras">Tutorial - Extras</a><button aria-label="Collapse sidebar category &#x27;Tutorial - Extras&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-extras/selecting-a-data-source">Selecting a Data Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorial-extras/carbon-aware-library">Carbon Aware Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-extras/codespaces">Launching the SDK in github Codespaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-extras/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-extras/containerization">Containerized WebApi</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-extras/linting">Linting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-extras/packaging">Packaging the Carbon Aware SDK</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/architecture">Architecture</a><button aria-label="Expand sidebar category &#x27;Architecture&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/samples">Samples</a><button aria-label="Expand sidebar category &#x27;Samples&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/troubleshooting">Troubleshooting guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://carbon-aware-sdk.greensoftware.foundation/client-apidocs/1.0.0/java/" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false">API references for WebAPI client libraries</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/tutorial---extras"><span itemprop="name">Tutorial - Extras</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Carbon Aware Library</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Carbon Aware Library</h1></header>
<p>The Carbon Aware SDK provides a C# Client Library to get the carbon
intensity for a given location and time period. The values reported in the Green
Software Foundation&#x27;s specification for carbon intensity (Grams per
Kilowatt Hour).</p>
<p><strong><em>Recommended</em></strong> - This user interface is best for when you need a consumable
version of the SDK as this library can be packaged into a nuget and consumed
locally.</p>
<p>The library replicates the Web Api, CLI and SDK functionality, leveraging the
same configuration</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table-of-contents">Table of Contents<a href="#table-of-contents" class="hash-link" aria-label="Direct link to Table of Contents" title="Direct link to Table of Contents">â€‹</a></h2>
<ul>
<li><a href="#carbon-aware-library">Carbon Aware Library</a>
<ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#emissionshandler-functions">EmissionsHandler Functions</a>
<ul>
<li><a href="#getemissionsdataasync">GetEmissionsDataAsync</a></li>
<li><a href="#getbestemissionsdataasync">GetBestEmissionsDataAsync</a></li>
<li><a href="#getaveragecarbonintensityasync">GetAverageCarbonIntensityAsync</a></li>
</ul>
</li>
<li><a href="#forecasthandler-functions">ForecastHandler Functions</a>
<ul>
<li><a href="#getcurrentforecastasync">GetCurrentForecastAsync</a></li>
<li><a href="#getforecastbydateasync">GetForecastByDateAsync</a></li>
</ul>
</li>
<li><a href="#data-sources">Data Sources</a>
<ul>
<li><a href="#watttime">WattTime</a>
<ul>
<li><a href="#locations">Locations</a></li>
<li><a href="#exception-handling">Exception Handling</a></li>
</ul>
</li>
<li><a href="#electricitymaps">ElectricityMaps</a>
<ul>
<li><a href="#locations">Locations</a></li>
<li><a href="#exception-handling">Exception Handling</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="emissionshandler-functions">EmissionsHandler Functions<a href="#emissionshandler-functions" class="hash-link" aria-label="Direct link to EmissionsHandler Functions" title="Direct link to EmissionsHandler Functions">â€‹</a></h2>
<p>The <code>EmissionsHandler</code> is responsible for all the functions that query the SDK
for <code>EmissionsData</code>. This includes both getting the data directly, or getting
the average carbon intensity from the data. There are currently 4 functions
managed by this handler:</p>
<ol>
<li><a href="#getemissionsdataasync">GetEmissionsDataAsync</a></li>
<li><a href="#getbestemissionsdataasync">GetBestEmissionsDataAsync</a></li>
<li><a href="#getaveragecarbonintensityasync">GetAverageCarbonIntensityAsync</a></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getemissionsdataasync">GetEmissionsDataAsync<a href="#getemissionsdataasync" class="hash-link" aria-label="Direct link to GetEmissionsDataAsync" title="Direct link to GetEmissionsDataAsync">â€‹</a></h3>
<p>This function calculates the observed emission data by location for a specified
time period. The location is a required parameter and is the name of the data
region for the configured Cloud provider. If time period is not provided, it
retrieves all the data until the current time.</p>
<p><code>GetEmissionsDataAsync</code> has two signatures: one which takes a single location
and one which takes an array of locations. Both signatures return the same
response: an array of <code>EmissionsData</code> objects that contains the location, time
and the rating in g/kWh.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="signature-1-single-location--start--end"><em>Signature 1: Single Location + Start + End</em><a href="#signature-1-single-location--start--end" class="hash-link" aria-label="Direct link to signature-1-single-location--start--end" title="Direct link to signature-1-single-location--start--end">â€‹</a></h4>
<p>Parameters:</p>
<ol>
<li><code>location</code>: The string name of the data region for the configured Cloud
provider.</li>
<li><code>startTime</code>: [Optional] The time at which the workload and corresponding
carbon usage begins.</li>
<li><code>endTime</code>: [Optional] The time at which the workload and corresponding carbon
usage ends.</li>
</ol>
<p>Request:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var data =  await this._emissionsHandler.GetEmissionsDataAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;eastus&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,1,2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,5,17)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Response:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EmissionsData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Location:&quot;eastus&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Time: DateTimeOffset(&quot;2022-05-17T20:45:11.5092741+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Rating: 70,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Duration: 60,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="signature-2-array-of-locations--start--end"><em>Signature 2: Array of Locations + Start + End</em><a href="#signature-2-array-of-locations--start--end" class="hash-link" aria-label="Direct link to signature-2-array-of-locations--start--end" title="Direct link to signature-2-array-of-locations--start--end">â€‹</a></h4>
<p>Parameters:</p>
<ol>
<li><code>locations</code>: The string array of names of the data regions for the configured
Cloud provider.</li>
<li><code>startTime</code>: [Optional] The time at which the workload and corresponding
carbon usage begins.</li>
<li><code>endTime</code>: [Optional] The time at which the workload and corresponding carbon
usage ends.</li>
</ol>
<p>Request:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var data =  await this._emissionsHandler.GetEmissionsDataAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string[]{&quot;eastus&quot;, &quot;westus&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,1,2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,5,17)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Response:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EmissionsData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Location:&quot;eastus&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Time: DateTimeOffset(&quot;2022-05-17T20:45:11.5092741+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Rating: 70,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Duration: 60,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EmissionsData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Location:&quot;west&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Time: DateTimeOffset(&quot;2022-05-17T20:45:11.5092741+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Rating: 52,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Duration: 60,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getbestemissionsdataasync">GetBestEmissionsDataAsync<a href="#getbestemissionsdataasync" class="hash-link" aria-label="Direct link to GetBestEmissionsDataAsync" title="Direct link to GetBestEmissionsDataAsync">â€‹</a></h3>
<p>This function calculates the best observed emission data by an array of
locations for a specified time period.</p>
<p>Location is a required parameter and is an array of the names of the data region
for the configured Cloud provider. If time period is not provided, it retrieves
all the data until the current time.</p>
<p><code>GetBestEmissionsDataAsync</code> has two signatures: one which takes a single
location and one which takes an array of locations. Both signatures return the
same response: an array of <code>EmissionsData</code> objects that contains the location,
time and the rating in g/kWh.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="signature-1-location--start--end"><em>Signature 1: Location + Start + End</em><a href="#signature-1-location--start--end" class="hash-link" aria-label="Direct link to signature-1-location--start--end" title="Direct link to signature-1-location--start--end">â€‹</a></h4>
<p>Parameters:</p>
<ol>
<li><code>location</code>: The string name of the data regions for the configured Cloud
provider.</li>
<li><code>startTime</code>: [Optional] The time at which the workload and corresponding
carbon usage begins.</li>
<li><code>endTime</code>: [Optional] The time at which the workload and corresponding carbon
usage ends.</li>
</ol>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var data =  await this._emissionsHandler.GetBestEmissionsDataAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;eastus&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,1,2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,5,17)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response is an array of <code>EmissionsData</code> objects that contains the location,
time and the rating in g/kWh.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EmissionsData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Location:&quot;eastus&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Time: DateTimeOffset(&quot;2022-05-17T20:45:11.5092741+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Rating: 70,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Duration: 60,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="signature-2-multiple-locations--start--end"><em>Signature 2: Multiple Locations + Start + End</em><a href="#signature-2-multiple-locations--start--end" class="hash-link" aria-label="Direct link to signature-2-multiple-locations--start--end" title="Direct link to signature-2-multiple-locations--start--end">â€‹</a></h4>
<p>Parameters:</p>
<ol>
<li><code>locations</code>: The string array of names of the data regions for the configured
Cloud provider.</li>
<li><code>startTime</code>: [Optional] The time at which the workload and corresponding
carbon usage begins.</li>
<li><code>endTime</code>: [Optional] The time at which the workload and corresponding carbon
usage ends.</li>
</ol>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var data =  await this._emissionsHandler.GetBestEmissionsDataAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string[]{&quot;eastus&quot;, &quot;westus&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,1,2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,5,17)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response is an array of <code>EmissionsData</code> objects that contains the location,
time and the rating in g/kWh.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EmissionsData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Location:&quot;westus&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Time: DateTimeOffset(&quot;2022-05-17T20:45:11.5092741+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Rating: 70,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Duration: 60,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getaveragecarbonintensityasync">GetAverageCarbonIntensityAsync<a href="#getaveragecarbonintensityasync" class="hash-link" aria-label="Direct link to GetAverageCarbonIntensityAsync" title="Direct link to GetAverageCarbonIntensityAsync">â€‹</a></h3>
<p>This function retrieves the measured carbon intensity data for a given location
between the time boundaries and calculates the average carbon intensity during
that period. Location is a required parameter and is the name of the data region
for the configured Cloud provider. This function is useful for reporting the
measured carbon intensity for a specific time period in a specific location.</p>
<p>Parameters:</p>
<ol>
<li><code>location</code>: The string name of the data region for the configured Cloud
provider.</li>
<li><code>start</code>: The time at which the workflow we are measuring carbon intensity for
started</li>
<li><code>end</code>: The time at which the workflow we are measuring carbon intensity for
ended</li>
</ol>
<p>Request:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var data =  await this._emissionsHandler.GetAverageCarbonIntensityAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;eastus&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,7,19,14,0,0,Timespan.Zero),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,7,19,18,0,0,Timespan.Zero)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response is a single double value representing the calculated average carbon intensity g/kWh.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">345.434</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="forecasthandler-functions">ForecastHandler Functions<a href="#forecasthandler-functions" class="hash-link" aria-label="Direct link to ForecastHandler Functions" title="Direct link to ForecastHandler Functions">â€‹</a></h2>
<p>The <code>ForecastHandler</code> is responsible for all the functions that query the SDK
for <code>EmissionsForecast</code>. There are currently 2 functions managed by this
handler:</p>
<ol>
<li><a href="#getcurrentforecastasync">GetCurrentForecastAsync</a></li>
<li><a href="#getforecastbydateasync">GetForecastByDateAsync</a></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getcurrentforecastasync">GetCurrentForecastAsync<a href="#getcurrentforecastasync" class="hash-link" aria-label="Direct link to GetCurrentForecastAsync" title="Direct link to GetCurrentForecastAsync">â€‹</a></h3>
<p>This function fetches only the most recently generated forecast for all provided
locations. It uses the &quot;dataStartAt&quot; and &quot;dataEndAt&quot; parameters to scope the
forecasted data points (if available for those times). If no start or end time
boundaries are provided, the entire forecast dataset is used. The scoped data
points are used to calculate average carbon intensities of the
specified &quot;windowSize&quot; and the optimal carbon intensity window is
identified.</p>
<p>The forecast data represents what the data source predicts future
carbon intensity values to be, not actual measured emissions data (as future
values cannot be known).</p>
<p>This endpoint is useful for determining if there is a more carbon-optimal time
to use electricity predicted in the future.</p>
<p>Parameters:</p>
<ol>
<li><code>location</code>: This is a required parameter and is an array of the names of the
data region for the configured Cloud provider.</li>
<li><code>dataStartAt</code>: Start time boundary of the current forecast data points.
Ignores current forecast data points before this time. Must be within the
forecast data point timestamps. Defaults to the earliest time in the forecast
data.</li>
<li><code>dataEndAt</code>: End time boundary of the current forecast data points. Ignores
current forecast data points after this time. Must be within the forecast
data point timestamps. Defaults to the latest time in the forecast data. If
neither <code>dataStartAt</code> nor <code>dataEndAt</code> are provided, all forecasted data
points are used in calculating the optimal carbon intensity window.</li>
<li><code>windowSize</code>: The estimated duration (in minutes) of the workload. Defaults
to the duration of a single forecast data point.</li>
</ol>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var data = await this._forecastHandler.GetCurrentForecastAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;northeurope&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,7,19,14,0,0,TimeSpan.Zero),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,7,20,4,38,0,TimeSpan.Zero),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response is an array of <code>EmissionsForecast</code> objects (one per requested
location) with their optimal carbon intensity windows.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EmissionsForecast()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RequestedAt: DateTimeOffset(&quot;2022-07-19T13:37:49+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GeneratedAt: DateTimeOffset(&quot;2022-07-19T13:35:00+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OptimalDataPoints: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      EmissionsData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Location: &quot;IE&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Time: DateTimeOffset(&quot;2022-07-19T18:45:00+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Duration: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Rating: 448.4451043375</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EmissionsDataPoints: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      EmissionsData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Location: &quot;IE&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Time: DateTimeOffset(&quot;2022-07-19T14:00:00+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Duration: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Rating: 532.02293146</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      EmissionsData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Location: &quot;IE&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Time: DateTimeOffset(&quot;2022-07-20T04:25:00+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Duration: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Rating: 535.7318741001667</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getforecastbydateasync">GetForecastByDateAsync<a href="#getforecastbydateasync" class="hash-link" aria-label="Direct link to GetForecastByDateAsync" title="Direct link to GetForecastByDateAsync">â€‹</a></h3>
<p>This function takes a requests for historical forecast data, fetches it, and
calculates the optimal carbon intensity window. This endpoint is useful
for back-testing what one might have done in the past, if they had access to the
current forecast at the time.</p>
<p>Parameters:</p>
<ol>
<li><code>location</code>: This is a required parameter and is the name of the data region
for the configured Cloud provider.</li>
<li><code>dataStartAt</code>: Start time boundary of the forecast data points. Ignores
forecast data points before this time. Must be within the forecast data point
timestamps. Defaults to the earliest time in the forecast data.</li>
<li><code>dataEndAt</code>: End time boundary of the forecast data points. Ignores forecast
data points after this time. Must be within the forecast data point
timestamps. Defaults to the latest time in the forecast data.</li>
<li><code>requestedAt</code>: This is a required parameter and is the historical time used
to fetch the most recent forecast as of that time.</li>
<li><code>windowSize</code>: The estimated duration (in minutes) of the workload. Defaults
to the duration of a single forecast data point</li>
</ol>
<p>If neither <code>dataStartAt</code> nor <code>dataEndAt</code> are provided, all forecasted data
points are used in calculating the optimal carbon intensity window.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var data = await this._forecastHandler.GetForecastByDateAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;northeurope&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,7,19,14,0,0,TimeSpan.Zero),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,7,20,4,38,0,TimeSpan.Zero),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DateTimeOffset(2022,7,19,13,30,0,TimeSpan.Zero),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response is an <code>EmissionsForecast</code> object with the optimal carbon
intensity window.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">EmissionsForecast()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  RequestedAt: DateTimeOffset(&quot;2022-07-19T13:30:00+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  GeneratedAt: DateTimeOffset(&quot;2022-07-19T13:35:00+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  OptimalDataPoints: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EmissionsData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Location: &quot;IE&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Time: DateTimeOffset(&quot;2022-07-19T18:45:00+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Duration: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Rating: 448.4451043375</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EmissionsDataPoints: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EmissionsData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Location: &quot;IE&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Time: DateTimeOffset(&quot;2022-07-19T14:00:00+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Duration: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Rating: 532.02293146</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EmissionsData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Location: &quot;IE&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Time: DateTimeOffset(&quot;2022-07-20T04:25:00+00:00&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Duration: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Rating: 535.7318741001667</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-sources">Data Sources<a href="#data-sources" class="hash-link" aria-label="Direct link to Data Sources" title="Direct link to Data Sources">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="watttime">WattTime<a href="#watttime" class="hash-link" aria-label="Direct link to WattTime" title="Direct link to WattTime">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="locations">Locations<a href="#locations" class="hash-link" aria-label="Direct link to Locations" title="Direct link to Locations">â€‹</a></h4>
<p>Each WattTime emissions data point is associated with a particular named
region often referred to as a balancing authority. For transparency, this value is also used in
<code>EmissionsData</code> response objects. It is not overwritten to match the named
datacenter provided by any request.</p>
<blockquote>
<p>&quot;A balancing authority ensures, in real time, that power system demand and
supply are finely balanced. This balance is needed to maintain the safe and
reliable operation of the power system. If demand and supply fall out of
balance, local or even wide-area blackouts can result.&quot;</p>
<p>See <a href="https://www.eia.gov/todayinenergy/detail.php?id=27152" target="_blank" rel="noopener noreferrer">this post</a> on
balancing authories from the EIA to learn more.</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="exception-handling">Exception Handling<a href="#exception-handling" class="hash-link" aria-label="Direct link to Exception Handling" title="Direct link to Exception Handling">â€‹</a></h4>
<p>If WattTime responds with a 4XX or 5XX status code the WattTime Data Source will
forward the response code and message back to the caller. Refer to the
<a href="https://www.watttime.org/api-documentation/" target="_blank" rel="noopener noreferrer">current WattTime documentation</a>
for the most up-to-date information about possible error codes.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-emissions-call-using-watttime">Example Emissions Call Using WattTime<a href="#example-emissions-call-using-watttime" class="hash-link" aria-label="Direct link to Example Emissions Call Using WattTime" title="Direct link to Example Emissions Call Using WattTime">â€‹</a></h4>
<p>The swimlanes diagram below follows an example request for emissions data using
WattTime as the data source provider. In this diagram, the <em>Client</em> is a user of
the SDK and the <em>WattTimeService</em> is the <a href="https://www.wattime.org" target="_blank" rel="noopener noreferrer">WattTime</a>
API.</p>
<p><img decoding="async" loading="lazy" alt="webapi to watttime flow diagram" src="/assets/images/webapi-swimlanes-98813b02d7bd1d628ed4b55834ba443f.png" width="1300" height="1034" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="electricitymaps">ElectricityMaps<a href="#electricitymaps" class="hash-link" aria-label="Direct link to ElectricityMaps" title="Direct link to ElectricityMaps">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="locations-1">Locations<a href="#locations-1" class="hash-link" aria-label="Direct link to Locations" title="Direct link to Locations">â€‹</a></h4>
<p>Each ElectricityMaps emissions data point is associated with a particular named
zone name. While the ElectricityMaps endpoint supports calling with lat/long
geoposition as well, the result will always be a corresponding zone name. They
provide a
<a href="https://static.electricitymaps.com/api/docs/index.html#zones" target="_blank" rel="noopener noreferrer">route on their API</a>
which can be queried to list all the zone names you have access to given your
token</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="exception-handling-1">Exception Handling<a href="#exception-handling-1" class="hash-link" aria-label="Direct link to Exception Handling" title="Direct link to Exception Handling">â€‹</a></h4>
<p>If ElectricityMaps responds with a 4XX or 5XX status code the ElectricityMaps
Data Source will forward the response code and message back to the caller. Refer
to the
<a href="/docs/src/CarbonAware.DataSources/CarbonAware.DataSources.ElectricityMaps/src/Client/ElectricityMapsClientHttpException.cs">ElectricityMapsHttpClientException</a>
class for documentation on expected error codes.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Green-Software-Foundation/carbon-aware-sdk/docs/tutorial-extras/carbon-aware-library.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tutorial-extras/selecting-a-data-source"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Selecting a Data Source</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tutorial-extras/codespaces"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Launching the SDK in github Codespaces</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of Contents</a></li><li><a href="#emissionshandler-functions" class="table-of-contents__link toc-highlight">EmissionsHandler Functions</a><ul><li><a href="#getemissionsdataasync" class="table-of-contents__link toc-highlight">GetEmissionsDataAsync</a></li><li><a href="#getbestemissionsdataasync" class="table-of-contents__link toc-highlight">GetBestEmissionsDataAsync</a></li><li><a href="#getaveragecarbonintensityasync" class="table-of-contents__link toc-highlight">GetAverageCarbonIntensityAsync</a></li></ul></li><li><a href="#forecasthandler-functions" class="table-of-contents__link toc-highlight">ForecastHandler Functions</a><ul><li><a href="#getcurrentforecastasync" class="table-of-contents__link toc-highlight">GetCurrentForecastAsync</a></li><li><a href="#getforecastbydateasync" class="table-of-contents__link toc-highlight">GetForecastByDateAsync</a></li></ul></li><li><a href="#data-sources" class="table-of-contents__link toc-highlight">Data Sources</a><ul><li><a href="#watttime" class="table-of-contents__link toc-highlight">WattTime</a></li><li><a href="#electricitymaps" class="table-of-contents__link toc-highlight">ElectricityMaps</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/quickstart">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/green-software-foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/gsfcommunity" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://greensoftwarefdn.slack.com/archives/C02JRAV4QEP" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack (private members only)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://greensoftware.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">greensoftware.foundation</a></li><li class="footer__item"><a href="https://github.com/Green-Software-Foundation/carbon-aware-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 GSF, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>